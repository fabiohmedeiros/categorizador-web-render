<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferramenta de Categorização - SiMCCIT</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/consult.css') }}">
</head>
<body>
    <div id="app-container">
        <!-- Painel de Controle Superior -->
        <header id="control-panel">
            <h1>Ferramenta de Categorização - SiMCCIT</h1>
            <div id="upload-section">
                <div class="upload-group">
                    <label for="video-upload">1. Vídeo:</label>
                    <input type="file" id="video-upload" name="video" accept="video/*,.mov,.mp4,.mkv,.avi,.wmv">
                </div>
                <div class="upload-group">
                    <label for="csv-upload">2. Transcrição (.csv):</label>
                    <input type="file" id="csv-upload" name="csv" accept=".csv">
                </div>
                <div class="upload-group">
                    <label for="result-filename">3. Nome do arquivo final:</label>
                    <input type="text" id="result-filename" placeholder="Ex: Sessao_1_Categorizada">
                </div>
                <button id="start-button">Iniciar Sessão</button>
            </div>
        </header>

        

        <!-- Área de Conteúdo Principal -->
        <main id="main-content" class="hidden">
            <div id="video-container">
                <video id="video-player" controls></video>
            </div>
            <div id="dialogue-section"> <!-- Nova div para agrupar diálogo e controles -->
                <div id="dialogue-container">
                    <!-- As falas serão inseridas aqui pelo JavaScript -->
                </div>
                <div id="finish-section" class="hidden"> <!-- ID CORRIGIDO E CLASSE HIDDEN ADICIONADA -->
                    <button id="finish-button">Terminar</button>
                </div>
            </div>
        </main>

        <!-- Tela de Conclusão da Sessão -->
        <div id="session-complete-screen" class="hidden" style="text-align: center; padding: 40px; margin-top: 50px;">
            <h2>Sessão Finalizada!</h2>
            <p style="font-size: 1.2em;">O arquivo CSV foi baixado com sucesso.</p>
            <p>Tempo total da sessão: <strong id="total-time">00:00:00</strong></p>
            <button id="restart-session-button" style="margin-top: 20px;">Iniciar Nova Sessão</button>
        </div>

        <!-- Página de Instruções (escondida por padrão) -->
        <div id="instructions-page" class="hidden">
            <div class="instructions-card">
                <h2>Instruções</h2>
                <p>Bem-vindo à ferramenta de categorização do SiMCCIT! Siga os passos abaixo para utilizar:</p>
                <ol>
                    <li>O vídeo e a transcrição aparecerão lado a lado. As palavras do texto serão destacadas em amarelo conforme o vídeo avança.</li>
                    <li>Use a barra de espaço do teclado ou clique diretamente sobre o vídeo para pausar ou continuar a gravação.</li>
                    <li>Com o mouse, selecione uma ou mais palavras na transcrição. Clique com o botão direito do mouse sobre a seleção para abrir o menu de categorias e escolher a opção desejada. Ao fazer isso, o trecho será destacado com uma cor correspondente à categoria selecionada.</li>
                    <li>Para remover uma categoria de um trecho já classificado, clique com o botão direito do mouse sobre qualquer palavra desse trecho e selecione "Remover Categoria".</li>
                    <li>Use o botão "Categorias" no canto superior direito para consultar as definições e exemplos das categorias do SiMCCIT.</li>
                    <li>Clique em qualquer palavra da transcrição para pular para o ponto correspondente no vídeo.</li>
                    <li>Ao terminar, clique no botão "Terminar" e chame o(a) pesquisador(a) responsável.</li>
                </ol>
                <p>Divirta-se!</p>
                <button id="start-categorization-button">Começar Categorização</button>
            </div>
        </div>

        <!-- Menu de Contexto para Categorias (escondido por padrão) -->
        <div id="context-menu" class="context-menu">
            <!-- As categorias serão inseridas aqui pelo JavaScript -->
        </div>

        <!-- Overlay de Carregamento -->
        <div id="loading-overlay" class="hidden">
            <div class="spinner"></div>
            <p>Processando...</p>
        </div>
    </div>

    <!-- Tooltip para mostrar a categoria ao passar o mouse -->
    <div id="category-tooltip" class="hidden"></div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/consult.js') }}"></script>
</body>
</html>
